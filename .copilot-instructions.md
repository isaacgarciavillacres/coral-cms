# Copilot Instructions for Coral CMS

## Project Overview

This is a **marketing website for a construction company** built with **Next.js 15**, **Payload CMS 3.59.1**, and **shadcn/ui** components. It uses TypeScript, Tailwind CSS, and Vercel Postgres as the database.

## Design Theme

- **Industry**: Construction Company Marketing Website
- **Light Mode**: Red primary color (#ef4444) for construction branding
- **Dark Mode**: Generic black tones with subtle white accents
- **Color Scheme**: Professional construction industry aesthetic

## Tech Stack

- **Framework**: Next.js 15.4.4 with App Router
- **CMS**: Payload CMS 3.59.1
- **Database**: Vercel Postgres
- **UI Library**: shadcn/ui with Radix UI primitives
- **Styling**: Tailwind CSS 3.4.3 with CSS variables
- **Language**: TypeScript 5.7.3
- **Package Manager**: pnpm
- **Node Version**: ^18.20.2 || >=20.9.0

## Project Structure

### Core Directories

- `src/app/(frontend)/` - Next.js frontend pages and layouts
- `src/app/(payload)/` - Payload CMS admin interface
- `src/collections/` - Payload CMS collections (Pages, Posts, Media, Users, Categories)
- `src/components/` - Reusable React components and shadcn/ui components
- `src/blocks/` - Payload CMS blocks for flexible content
- `src/fields/` - Custom Payload CMS fields
- `src/utilities/` - Utility functions and helpers

### Key Files

- `src/payload.config.ts` - Payload CMS configuration
- `components.json` - shadcn/ui configuration
- `tailwind.config.mjs` - Tailwind CSS configuration
- `next.config.js` - Next.js configuration

## Development Guidelines

### Payload CMS

- Use Payload 3.x syntax and patterns
- Collections are in `src/collections/`
- Custom fields in `src/fields/`
- Blocks for flexible content in `src/blocks/`
- Use Lexical rich text editor (`@payloadcms/richtext-lexical`)
- Database adapter: `@payloadcms/db-vercel-postgres`

### shadcn/ui Components

- Components are installed in `src/components/ui/`
- Use the configured aliases: `@/components` and `@/utilities/ui`
- Base color: slate
- CSS variables are enabled
- No prefix configured
- Components use Radix UI primitives
- Tailwind CSS integration with `tailwind-merge` and `clsx`

### Styling

- Use Tailwind CSS utility classes
- **Light Mode**: Red primary color (`bg-primary`, `text-primary`) for construction branding
- **Dark Mode**: Generic black tones (`bg-background`, `text-foreground`)
- CSS variables are enabled for theming with `[data-theme="dark"]` selector
- Additional construction-themed colors available:
  - `construction-red-*` (50-900 scale)
  - `construction-orange-*` (400, 500, 600)
  - `construction-yellow-*` (400, 500)
  - `construction-gray-*` (selected grays)
- Typography plugin enabled for content
- Animation utilities from `tailwindcss-animate`
- Global styles in `src/app/(frontend)/globals.css`

### Code Patterns

- Use TypeScript throughout
- ESM modules (type: "module")
- React Server Components (RSC enabled)
- App Router structure
- File-based routing in `src/app/`

## Commands

- `pnpm dev` - Start development server
- `pnpm build` - Build for production
- `pnpm start` - Start production server
- `pnpm generate:types` - Generate Payload types
- `pnpm lint` - Run ESLint
- `pnpm test` - Run all tests (integration + e2e)

## Important Notes

- Always use `@/` imports for project files
- Follow Payload 3.x patterns for collections and fields
- Use shadcn/ui components when building UI
- Maintain TypeScript strict mode
- Use CSS variables for theming
- Follow Next.js App Router conventions
- Use Server Components by default, mark Client Components with 'use client'

## File Naming Conventions

- Components: PascalCase (e.g., `MyComponent.tsx`)
- Pages: lowercase with hyphens (e.g., `my-page/page.tsx`)
- Utilities: camelCase (e.g., `myUtility.ts`)
- Payload collections: PascalCase (e.g., `Posts.ts`)

## Database

- Uses Vercel Postgres adapter
- Payload handles schema management
- Types are auto-generated with `pnpm generate:types`

## Testing

- E2E tests with Playwright
- Integration tests with Vitest
- Test files in `tests/` directory

When working on this project:

1. Use the established patterns and conventions
2. Leverage shadcn/ui components for UI elements
3. Follow Payload CMS 3.x best practices
4. Use TypeScript throughout
5. **Maintain construction industry branding with red accent colors in light mode**
6. **Use generic black tones for dark mode**
7. Use Server Components when possible
8. Generate types after schema changes
9. Consider construction industry UX patterns (professional, trustworthy, clear CTAs)
10. Use appropriate construction-themed colors from the extended palette
